# n8n èŠ‚ç‚¹ï¼šé‡‘å±± AirScript é€šç”¨æ‰§è¡Œå™¨

<!-- å¾½ç« ï¼Œå‘å¸ƒåˆ° npm åï¼Œè¿™é‡Œçš„é“¾æ¥ä¼šè‡ªåŠ¨ç”Ÿæ•ˆ -->
[![NPM Version](https://img.shields.io/npm/v/n8n-nodes-kingsoft-airscript?style=flat-square)](https://www.npmjs.com/package/n8n-nodes-kingsoft-airscript)
[![NPM Downloads](https://img.shields.io/npm/dm/n8n-nodes-kingsoft-airscript?style=flat-square)](https://www.npmjs.com/package/n8n-nodes-kingsoft-airscript)
[![License](https://img.shields.io/npm/l/n8n-nodes-kingsoft-airscript?style=flat-square)](https://github.com/your-username/n8n-nodes-kingsoft-airscript/blob/main/LICENSE)
<!-- è¯·åœ¨ä½ çš„ GitHub ä»“åº“åˆ›å»º LICENSE æ–‡ä»¶ï¼Œé€šå¸¸é€‰æ‹© MIT License -->

è¿™æ˜¯ä¸€ä¸ªä¸º [n8n](https://n8n.io/) è®¾è®¡çš„ç¤¾åŒºèŠ‚ç‚¹ï¼Œå®ƒæ‰“é€šäº† n8n ä¸ [é‡‘å±± AirScript](https://kdocs.cn/l/cdLp4aUrAR4r) ä¹‹é—´çš„æ¡¥æ¢ï¼Œè®©æ‚¨å¯ä»¥åœ¨ n8n å·¥ä½œæµä¸­ï¼Œå®‰å…¨ã€çµæ´»åœ°æ‰§è¡Œä»»ä½• AirScript è„šæœ¬ã€‚

> ### ğŸš€ **è¿™ä¸ä»…ä»…æ˜¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ›´æ˜¯ä¸€ä¸ªèµ‹èƒ½å·¥å…·ï¼**
>
> æœ¬èŠ‚ç‚¹çš„æ ¸å¿ƒä»·å€¼ï¼Œåœ¨äºé…åˆæˆ‘ä»¬ä¸ºæ‚¨ç²¾å¿ƒå°è£…çš„ **[AirScript ä¸­æ–‡å‡½æ•°åº“](https://www.kdocs.cn/l/cho73TDGgMPP)** ä½¿ç”¨ã€‚æ‚¨æ— éœ€ä»é›¶å¼€å§‹ï¼Œå³å¯åœ¨è„šæœ¬ä¸­è°ƒç”¨å¼ºå¤§çš„ä¸­æ–‡å‡½æ•°ï¼Œè½»æ¾å®ç°å¤æ‚çš„æ•°æ®å¤„ç†å’Œè‡ªåŠ¨åŒ–ä»»åŠ¡ã€‚
>
> **[ç‚¹å‡»æŸ¥é˜…å‡½æ•°åº“ & å®Œæ•´ä½¿ç”¨æŒ‡å—](https://www.kdocs.cn/l/cho73TDGgMPP)**

---

- [åŠŸèƒ½ç‰¹æ€§](#åŠŸèƒ½ç‰¹æ€§)
- [å®‰è£…](#å®‰è£…)
- [å¿«é€Ÿå¼€å§‹ (5åˆ†é’Ÿé…ç½®)](#å¿«é€Ÿå¼€å§‹-5åˆ†é’Ÿé…ç½®)
- [èŠ‚ç‚¹ç”¨æ³•è¯¦è§£](#èŠ‚ç‚¹ç”¨æ³•è¯¦è§£)
- [é«˜çº§ç”¨æ³•ï¼šåŠ¨æ€å‚æ•°ä¸è¡¨è¾¾å¼](#é«˜çº§ç”¨æ³•åŠ¨æ€å‚æ•°ä¸è¡¨è¾¾å¼)
- [å®æˆ˜æ¼”ç»ƒï¼šè‡ªåŠ¨åŒ–å¤„ç†æ–°è®¢å•](#å®æˆ˜æ¼”ç»ƒè‡ªåŠ¨åŒ–å¤„ç†æ–°è®¢å•)
- [è·å–å¸®åŠ©ä¸æ”¯æŒ](#è·å–å¸®åŠ©ä¸æ”¯æŒ)
- [å…¼å®¹æ€§](#å…¼å®¹æ€§)

## åŠŸèƒ½ç‰¹æ€§

-   âœ… **å¤šç§æ‰§è¡Œæ¨¡å¼**ï¼šæ”¯æŒåŒæ­¥æ‰§è¡Œï¼ˆç­‰å¾…ç»“æœï¼‰å’Œå¼‚æ­¥æ‰§è¡Œï¼ˆç«‹å³è¿”å›ä»»åŠ¡IDï¼‰ã€‚
-   âœ… **å®Œæ•´çš„å‚æ•°æ”¯æŒ**ï¼šæ”¯æŒå‘è„šæœ¬ä¼ é€’ `argv`, `sheet_name`, `range` ç­‰æ‰€æœ‰ `Context` å‚æ•°ã€‚
-   âœ… **å¼‚æ­¥æµç¨‹é—­ç¯**ï¼šæä¾›äº†â€œè·å–ä»»åŠ¡çŠ¶æ€â€æ“ä½œï¼Œå¯ä¸å¼‚æ­¥æ‰§è¡Œå®Œç¾é…åˆï¼Œå®ç°é•¿æ—¶é—´è¿è¡Œä»»åŠ¡çš„è½®è¯¢ã€‚
-   âœ… **å®‰å…¨å¯é **ï¼šæ‚¨çš„ AirScript Token è¢«å®‰å…¨åœ°å­˜å‚¨åœ¨ n8n çš„å‡­è¯åº“ä¸­ï¼Œå¹¶é€šè¿‡å‡­è¯æµ‹è¯•åŠŸèƒ½ç¡®ä¿æœ‰æ•ˆæ€§ã€‚
-   âœ… **çµæ´»çš„è¡¨è¾¾å¼æ”¯æŒ**ï¼šæ‰€æœ‰è¾“å…¥å­—æ®µå‡æ”¯æŒ n8n è¡¨è¾¾å¼ï¼Œå¯å®ç°å®Œå…¨åŠ¨æ€çš„å·¥ä½œæµã€‚

## å®‰è£…

åœ¨æ‚¨çš„ n8n å®ä¾‹ä¸­ï¼Œè¿›å…¥ **Settings > Community Nodes**ï¼Œæœç´¢ `n8n-nodes-kingsoft-airscript` å¹¶å®‰è£…ã€‚

æ›´å¤šç»†èŠ‚è¯·å‚è€ƒ n8n å®˜æ–¹çš„ [ç¤¾åŒºèŠ‚ç‚¹å®‰è£…æŒ‡å—](https://docs.n8n.io/integrations/community-nodes/installation/)ã€‚

## å¿«é€Ÿå¼€å§‹ (5åˆ†é’Ÿé…ç½®)

1.  **è·å– AirScript Token**ï¼š
    *   åœ¨é‡‘å±±å¤šç»´è¡¨æˆ–ç”µå­è¡¨æ ¼ä¸­ï¼Œæ‰“å¼€è„šæœ¬ç¼–è¾‘å™¨ã€‚
    *   ç‚¹å‡»å·¥å…·æ çš„ã€è„šæœ¬ä»¤ç‰Œï¼ˆbetaï¼‰ã€‘æŒ‰é’®ï¼Œåˆ›å»ºå¹¶å¤åˆ¶æ‚¨çš„ä¸ªäººè„šæœ¬ä»¤ç‰Œï¼ˆAPITokenï¼‰ã€‚
2.  **åœ¨ n8n ä¸­æ·»åŠ å‡­è¯**ï¼š
    *   åœ¨ n8n çš„ "Credentials" é¡µé¢ï¼Œç‚¹å‡» "Add credential"ã€‚
    *   æœç´¢å¹¶é€‰æ‹© "Kingsoft AirScript API"ã€‚
    *   å°†æ‚¨å¤åˆ¶çš„ Token ç²˜è´´è¿›å»å¹¶ä¿å­˜ã€‚

## èŠ‚ç‚¹ç”¨æ³•è¯¦è§£

### æ“ä½œ (Operation)

-   **Run Script (Sync)**: åŒæ­¥æ‰§è¡Œè„šæœ¬ã€‚é€‚ç”¨äºè€—æ—¶è¾ƒçŸ­ã€ä¸”ä¸‹ä¸€æ­¥éª¤éœ€è¦ç«‹åˆ»ä½¿ç”¨å…¶è¿”å›ç»“æœçš„åœºæ™¯ã€‚
-   **Run Script (Async)**: å¼‚æ­¥æ‰§è¡Œè„šæœ¬ã€‚é€‚ç”¨äºè€—æ—¶è¾ƒé•¿çš„æ‰¹é‡ä»»åŠ¡ï¼Œå®ƒä¼šç«‹å³è¿”å›ä¸€ä¸ª `task_id` è€Œä¸é˜»å¡å·¥ä½œæµã€‚
-   **Get Task Status**: è·å–ä»»åŠ¡çŠ¶æ€ã€‚é…åˆå¼‚æ­¥æ‰§è¡Œä½¿ç”¨ï¼Œé€šè¿‡ä¸Šä¸€æ­¥è·å¾—çš„ `task_id` æ¥æŸ¥è¯¢ä»»åŠ¡çš„æœ€ç»ˆç»“æœã€‚

### æ ¸å¿ƒå‚æ•°

-   **File ID / Script ID**: æ‰§è¡Œä¸€ä¸ªå·²ä¿å­˜åœ¨é‡‘å±±æ–‡æ¡£é‡Œçš„è„šæœ¬æ—¶ï¼Œéœ€è¦æä¾›è¿™ä¸¤ä¸ª IDã€‚**æ”¯æŒè¡¨è¾¾å¼**ã€‚
-   **Sheet Name, Range, etc.**: å¯é€‰å‚æ•°ï¼Œç”¨äºå‘è„šæœ¬çš„ `Context` ä¼ é€’ç¯å¢ƒä¿¡æ¯ã€‚**æ”¯æŒè¡¨è¾¾å¼**ã€‚
-   **Parameters (argv)**: ä¸€ä¸ªå¼ºå¤§çš„ JSON è¾“å…¥æ¡†ï¼Œç”¨äºå‘æ‚¨çš„è„šæœ¬ä¼ é€’ä»»æ„è‡ªå®šä¹‰çš„åŠ¨æ€æ•°æ®ã€‚è¿™æ˜¯å®ç°å¤æ‚é€»è¾‘çš„å…³é”®ã€‚

## é«˜çº§ç”¨æ³•ï¼šåŠ¨æ€å‚æ•°ä¸è¡¨è¾¾å¼

æœ¬èŠ‚ç‚¹çš„æ‰€æœ‰è¾“å…¥æ¡†éƒ½æ”¯æŒ n8n çš„è¡¨è¾¾å¼åŠŸèƒ½ã€‚è¿™æ„å‘³ç€æ‚¨å¯ä»¥ä»ä¸Šä¸€ä¸ªèŠ‚ç‚¹åŠ¨æ€åœ°è·å–è¿™äº›å€¼ï¼Œå®ç°æ›´é«˜çº§çš„è‡ªåŠ¨åŒ–ã€‚

**ç¤ºä¾‹ï¼šåŠ¨æ€æ‰§è¡Œä¸åŒè¡¨æ ¼çš„è„šæœ¬**

å‡è®¾æ‚¨çš„ä¸Šä¸€ä¸ªèŠ‚ç‚¹è¿”å›äº†å¦‚ä¸‹æ•°æ®ï¼š
```json
{
  "targetFile": "f-xxxxxxxx",
  "targetScript": "s-yyyyyyyy",
  "targetSheet": "2024å¹´10æœˆé”€å”®æ•°æ®",
  "payload": {
    "action": "daily_report"
  }
}
```

æ‚¨å¯ä»¥åœ¨æœ¬èŠ‚ç‚¹çš„å‚æ•°ä¸­è¿™æ ·è®¾ç½®ï¼š
-   **File ID**: `{{ $json.targetFile }}`
-   **Script ID**: `{{ $json.targetScript }}`
-   **Sheet Name**: `{{ $json.targetSheet }}`
-   **Parameters (argv)**: `{{ $json.payload }}`

è¿™æ ·ï¼ŒèŠ‚ç‚¹å°±ä¼šæ ¹æ®ä¸Šæ¸¸æ•°æ®ï¼Œè‡ªåŠ¨åœ°ã€åŠ¨æ€åœ°æ‰§è¡Œæ­£ç¡®çš„è„šæœ¬ã€‚

## å®æˆ˜æ¼”ç»ƒï¼šè‡ªåŠ¨åŒ–å¤„ç†æ–°è®¢å•

è¿™æ˜¯ä¸€ä¸ªå¸¸è§åœºæ™¯ï¼šå½“ä½ çš„ç½‘åº—æœ‰æ–°è®¢å•æ—¶ï¼Œè‡ªåŠ¨å°†å…¶ä¿¡æ¯å†™å…¥é‡‘å±±å¤šVç»´è¡¨ã€‚

1.  ä½¿ç”¨ n8n çš„ "Webhook" èŠ‚ç‚¹æ¥æ”¶æ–°è®¢å•æ•°æ®ã€‚
2.  è¿æ¥åˆ°æˆ‘ä»¬çš„ "Kingsoft AirScript" èŠ‚ç‚¹ã€‚
3.  åœ¨èŠ‚ç‚¹ä¸­è¿›è¡Œå¦‚ä¸‹é…ç½®ï¼š
    *   **Operation**: `Run Script (Sync)`
    *   **File ID / Script ID**: å¡«å…¥æ‚¨ç”¨äºå¤„ç†è®¢å•çš„è„šæœ¬ IDã€‚
    *   **Sheet Name**: `è®¢å•æ€»è¡¨`
    *   **Parameters (argv)**: ä½¿ç”¨è¡¨è¾¾å¼ï¼Œå°† Webhook æ”¶åˆ°çš„æ•°æ®æ˜ å°„è¿‡å»ã€‚
        ```json
        {
          "orderNumber": "{{ $json.body.order_id }}",
          "customerName": "{{ $json.body.customer.name }}",
          "amount": "{{ $json.body.total_price }}"
        }
        ```
4.  åœ¨æ‚¨çš„ AirScript è„šæœ¬ä¸­ï¼Œé€šè¿‡ `Context.argv` è·å–è¿™äº›æ•°æ®ï¼Œå¹¶æ‰§è¡Œæ‚¨éœ€è¦çš„é€»è¾‘ã€‚

> **æƒ³è®©è¿™ä¸€åˆ‡å˜å¾—æ›´ç®€å•ï¼Ÿ**
>
> æˆ‘ä»¬çš„ **[ä¸­æ–‡å‡½æ•°åº“](https://www.kdocs.cn/l/cho73TDGgMPP)** æä¾›äº†ç°æˆçš„å‡½æ•°æ¥å¤„ç†æ•°æ®ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿæä¾› **[å¼€ç®±å³ç”¨çš„ n8n å·¥ä½œæµæ¨¡æ¿](https://www.kdocs.cn/l/cho73TDGgMPP)**ï¼Œä¸‹è½½å¯¼å…¥ï¼Œåªéœ€ä¿®æ”¹å°‘é‡å‚æ•°å³å¯ä½¿ç”¨ï¼

## è·å–å¸®åŠ©ä¸æ”¯æŒ

-   **ç¤¾åŒºæ”¯æŒ**: å¦‚æœæ‚¨åœ¨ä½¿ç”¨èŠ‚ç‚¹æ—¶é‡åˆ° bug æˆ–æœ‰åŠŸèƒ½å»ºè®®ï¼Œæ¬¢è¿åœ¨æˆ‘ä»¬çš„ [GitHub ä»“åº“](https://github.com/your-username/n8n-nodes-kingsoft-airscript) æäº¤ Issueï¼Œæˆ–åœ¨ [n8n ç¤¾åŒºè®ºå›](https://community.n8n.io/) å‘å¸–ã€‚
    <!-- è¯·æŠŠä¸Šé¢çš„ GitHub é“¾æ¥æ›¿æ¢æˆä½ çš„çœŸå®ä»“åº“åœ°å€ -->
-   **ä¸“ä¸šæ”¯æŒä¸å®šåˆ¶æœåŠ¡**: å¦‚æœæ‚¨çš„ä¼ä¸šéœ€è¦ï¼š
    *   ä¼˜å…ˆçš„æŠ€æœ¯æ”¯æŒå“åº”ã€‚
    *   é’ˆå¯¹æ‚¨ä¸šåŠ¡æµç¨‹çš„ AirScript è„šæœ¬å®šåˆ¶å¼€å‘ã€‚
    *   å¤æ‚çš„ n8n å·¥ä½œæµå’¨è¯¢ä¸æ­å»ºã€‚
    *   è¯·é€šè¿‡æˆ‘ä»¬çš„ **[å®˜æ–¹æ–‡æ¡£ä¸è”ç³»æ–¹å¼](https://www.kdocs.cn/l/cho73TDGgMPP)** äº†è§£è¯¦æƒ…ã€‚

## å…¼å®¹æ€§

-   **æœ€ä½ n8n ç‰ˆæœ¬**: `1.0.0`
-   **æµ‹è¯•é€šè¿‡çš„ n8n ç‰ˆæœ¬**: `1.15.3`
    <!-- å½“ä½ è¿è¡Œ npm run dev æ—¶ï¼Œå‘½ä»¤è¡Œä¼šæ˜¾ç¤º n8n çš„ç‰ˆæœ¬å·ï¼Œè¯·æŠŠå®ƒå¡«åœ¨è¿™é‡Œ -->

---

> **æ„Ÿè°¢æ‚¨ä½¿ç”¨ n8n èŠ‚ç‚¹ï¼šé‡‘å±± AirScript é€šç”¨æ‰§è¡Œå™¨ï¼**